---
title: Methods of Rationality predictions
description: Recording fan speculation for retrospectives; analyzing and projecting reviews
created: 25 Mar 2012
status: in progress
belief: likely
tags: statistics, predictions, computer science, transhumanism
...

Sources for predictions: [PredictionBook.com](http://predictionbook.com), [LessWrong](http://lesswrong.com/r/discussion/lw/7jd/harry_potter_and_the_methods_of_rationality/), & [TvTropes](http://tvtropes.org/pmwiki/pmwiki.php/WMG/HarryPotterAndTheMethodsOfRationality)

# Publication

## Awards

Hugo:

- [_MoR_ in any form wins a Hugo before 2016](http://predictionbook.com/predictions/5640)
- [_MoR_ wins a Hugo for Best Novel 2013-2017](http://predictionbook.com/predictions/6556)

## Completion

Out of universe:

- [by 2013](http://predictionbook.com/predictions/4543)
- [by 2014](http://predictionbook.com/predictions/4544)
- [by 2015](http://predictionbook.com/predictions/4545)

In universe, complete during Harry's:

- [first year at Hogwarts](http://predictionbook.com/predictions/6349)
- [second year](http://predictionbook.com/predictions/6350)
- [third year](http://predictionbook.com/predictions/6351)
- [fourth year or later](http://predictionbook.com/predictions/6352)

[Chapter 100 will, after 1 month, have 215-792 reviews posted on FF.net](http://predictionbook.com/predictions/9270)

## 2012

Eliezer will publish:

- ~~[>=1 2+ page chapters](http://predictionbook.com/predictions/5484)~~
- ~~[>=2 chapters](http://predictionbook.com/predictions/5112)~~
- ~~[<4 chapters](http://predictionbook.com/predictions/5485)~~
- ~~[>= 6 chapters](http://predictionbook.com/predictions/6353)~~

### ch 78

~~[Chapter 78 will be published by February 2012](http://predictionbook.com/predictions/4325)~~

# Plot

## Chapters
### ch 21

The unheard prophecy by Sybil Trelawney refers to:

- [Harry](http://predictionbook.com/predictions/6356)
- [Voldemort](http://predictionbook.com/predictions/6357)
- [Sirius Black](http://predictionbook.com/predictions/6358)
- [Remus Lupin](http://predictionbook.com/predictions/6359)
- [Hat & Cloak](http://predictionbook.com/predictions/6360)

### ch 45

The hint is about...

- [why Harry can't hear Dementors](http://predictionbook.com/predictions/6362)
- [what is the important task McGonagall was called away from](http://predictionbook.com/predictions/6363)
- [why the Dementors are out to get Quirrel](http://predictionbook.com/predictions/6364)
- [what happened to the phoenix Fawkes](http://predictionbook.com/predictions/6365)

### ch 81

~~Harry's solution will be...~~

- ~~[unpredicted in the 2 LW Discussion pages](http://predictionbook.com/predictions/6170)~~
- ~~[nothing](http://predictionbook.com/predictions/6146)~~
- ~~[invoking Lucius's debt](http://predictionbook.com/predictions/6147) to whomever killed his supposed Imperiuser~~
- ~~[invoke the Imperius-debts](http://predictionbook.com/predictions/6148) of other Wizengamot members~~
- ~~[make Dumbledore turn himself in](http://predictionbook.com/predictions/6149) to Lucius in exchange for Hermione's freedom~~
- ~~[threaten to destroy Azkaban](http://predictionbook.com/predictions/6150)~~
- ~~[reveal the truth](http://predictionbook.com/predictions/6151) about Bellatrix's escape~~
- ~~[offer the Wizengamot](http://predictionbook.com/predictions/6152) Voldemort's true identity (Quirrel)~~
- ~~[accept Hermione's imprisonment](http://predictionbook.com/predictions/6153) but order the Dementors to leave her alone~~
- ~~[destroying one of the Dementors](http://predictionbook.com/predictions/6154)~~
- ~~[using the Time-turner](http://predictionbook.com/predictions/6158)~~

    - ~~to [alter Hermione's testimony](http://predictionbook.com/predictions/6159) to something easily falsifiable~~
    - ~~to [affect Lucius](http://predictionbook.com/predictions/6160) in some way~~
    - ~~to [smuggle Hermione out](http://predictionbook.com/predictions/6161) under the Cloak~~
- ~~ask for [a trial by combat](http://predictionbook.com/predictions/6155)~~
- ~~[have Quirrel](http://predictionbook.com/predictions/6156) make Bella confess to the crime~~
- ~~[confess to the attack](http://predictionbook.com/predictions/6164)~~
- ~~[demonstrate Hermione's wand](http://predictionbook.com/predictions/6163) did not cast the curse with _Priori Incantatem_~~

### ch 85

by ch85:

- [Dumbledore will realize Harry was involved in the Azkaban incident](http://predictionbook.com/predictions/6290)
- [Dumbledore will permit Harry to execute his arbitrage ideas](http://predictionbook.com/predictions/6291)

## Magic

- [Harry's blood/Atlantis/origin-of-magic theory is basically wrong](http://predictionbook.com/predictions/5543)
- [someone will be mentioned or shown using the Imperius curse on themselves](http://predictionbook.com/predictions/6367) (or consenting to another's use on them) to supplement their willpower (dieting, working hard, etc.)
- [Humans can be permanently turned into house-elves](http://predictionbook.com/predictions/6366)

    ~~[and this will be revealed in chapter 80](http://predictionbook.com/predictions/6109)~~
- the ritual ch74 alluded to in ch74 to [summon Death summons a dementor](http://predictionbook.com/predictions/8286)

  and [will be used](http://predictionbook.com/predictions/8287)

### Objects

Horcruxes:

- [5 Voldemort Horcruxes are where](http://predictionbook.com/predictions/6368) Harry suggested putting hidden things in ch46
- There are [>7 Voldemort Horcruxes](http://predictionbook.com/predictions/6369)

The Philosopher's Stone...

- [requires human sacrifice](http://predictionbook.com/predictions/5420)
- to [be mass-manufactured by Harry](http://predictionbook.com/predictions/6370) or at his behest

Deathly Hallows:

- A Deathly Hallow besides the Cloak will appear in [the possession of a character in the present-day](http://predictionbook.com/predictions/6374) at some point
- [the Elder Wand is already (ch83) in the possession of a character](http://predictionbook.com/predictions/6375)

    - and [it is Dumbledore](http://predictionbook.com/predictions/6377)
    - and [it is Quirrel](http://predictionbook.com/predictions/6376)

Bacon's diary is

- [Voldemort's diary](http://predictionbook.com/predictions/6378)
- [both](http://predictionbook.com/predictions/6379) Voldemort and Roger Bacon's diary
- [a Horcrux](http://predictionbook.com/predictions/6380)

    - [made by Quirrel](http://predictionbook.com/predictions/6381)

        - [when he killed Rita Skeeter](http://predictionbook.com/predictions/6382)
- a diary with indefinite owners but [no intrinsic magical properties](http://predictionbook.com/predictions/5610)

The constant glitch in the Marauder's Map is

- Quirrel appearing as ['the Defense Professor'](http://predictionbook.com/predictions/6533)
- Quirrel [appearing under another name](http://predictionbook.com/predictions/6534) (eg. 'Tom Riddle')
- the spirit of [Voldemort or Riddle](http://predictionbook.com/predictions/6535)

The intermittent glitch in the Marauder's Map is

- [people appearing multiple times due to Time Turners](http://predictionbook.com/predictions/6537)
- the spirit of [Voldemort or Riddle](http://predictionbook.com/predictions/6553)

[Azkaban Island is the last remnant of Atlantis](http://predictionbook.com/predictions/6371)

The purpose of the golden wibblers device in Dumbledore's office will [be revealed before 2017](http://predictionbook.com/predictions/5802)

### Creatures

Dementors

- [either copy minds or store souls](http://predictionbook.com/predictions/6384) for later resurrection
- [simply kill](http://predictionbook.com/predictions/6385) like anything else, death is death (cf. _Death Note_)

[There will be](http://predictionbook.com/predictions/6383) at least one character whose Animagus form is another human

## Events

[The Peverell tombstone motto will be alluded to](http://predictionbook.com/predictions/5122)

### Past

[The original Quirrel was Voldemort's master or teacher.](http://predictionbook.com/predictions/6402)

Lily Potter did not give Petunia a magic potion, but [actually Imperius'ed her](http://predictionbook.com/predictions/6403).

[Lucius Malfoy *was*](http://predictionbook.com/predictions/6404), at least initially, Imperiused into becoming a Death Eater

#### Prophecy & Attack

Voldemort:

- [did not intend Harry's death](http://predictionbook.com/predictions/3237)
- [Voldemort deliberately & voluntarily retired](http://predictionbook.com/predictions/6405) from being Dark Lord, after doing something else involving Harry

[The Prophecy actually referred to Neville](http://predictionbook.com/predictions/6406) Longbottom and not Harry

Dumbledore deliberately [arranged for Voldemort to learn](http://predictionbook.com/predictions/5550) of the Prophecy

The Prophecy as transmitted to Voldemort was [faked, modified, altered, or incomplete](http://predictionbook.com/predictions/6407)

#### Rita Skeeter hoaxing

Who did it?

- [Quirrel](http://predictionbook.com/predictions/6409)
- [Dumbledore](http://predictionbook.com/predictions/6408)
- [Fred & George Weasley](http://predictionbook.com/predictions/6410)

    - and they [used Polyjuice Potion](http://predictionbook.com/predictions/6412) to submit the hoax article under Rita Skeeter's name
    - and they [gave false memories via Memory Charm](http://predictionbook.com/predictions/6411) to Rita Skeeter

        - actually, [Lockhart did](http://predictionbook.com/predictions/6627)
    - and they [magically modified the memory of the witnesses](http://predictionbook.com/predictions/6415) Rita relied on to write the article
    - and they [tricked her into writing down the story and then Obliviated her](http://predictionbook.com/predictions/6413); she trusted her notes and published
    - and they [used Muggle technology to forge the documents](http://predictionbook.com/predictions/6414)

#### Hermione frame

was conducted by

- [Snape](http://predictionbook.com/predictions/6602)
- [Cloak & Hat](http://predictionbook.com/predictions/6608)

### Future

- A ritual will [restore Voldemort to a body](http://predictionbook.com/predictions/6434)

    and [Bellatrix Black will be used](http://predictionbook.com/predictions/6435)

- Harry will stay at Hogwarts [during Easter and his parents will visit him](http://predictionbook.com/predictions/6433)

## Characters

Dumbledore, Quirrel, Voldemort, Santa Claus, and Mr. Hat and Cloak are [all the same person](http://predictionbook.com/predictions/6436).

### Romance

Harry romance:

- [>=1 polyamorous relationship](http://predictionbook.com/predictions/4542)
- [Harry will get a harem](http://predictionbook.com/predictions/4564)
- [Only Harry/Hermione romance onscreen](http://predictionbook.com/predictions/4532)
- [Harry/Luna](http://predictionbook.com/predictions/4533)
- [Harry/Ginny](http://predictionbook.com/predictions/4537)
- [Harry/Tracey](http://predictionbook.com/predictions/4538)
- [Harry/Draco](http://predictionbook.com/predictions/4540)

Draco romance:

- [Draco/Luna](http://predictionbook.com/predictions/4534)

### Harry

Harry is...

- [Voldemort](http://predictionbook.com/predictions/5073)
- [a Horcrux](http://predictionbook.com/predictions/6437)

Harry's [disturbed sleep is a clue](http://predictionbook.com/predictions/6438) to some unrevealed secret (and not just a Time-turner excuse)

Future breakthroughs:

- [Harry will invent](http://predictionbook.com/predictions/6439) some form of 'metamagic' (eg. a self-replicating spell or magical construct/artifact)
- Harry will [create a superintelligent AI](http://predictionbook.com/predictions/6440) using magic or magical objects

    - and it [won't be Friendly](http://predictionbook.com/predictions/6441), killing many/all

Harry will:

- [bite a teacher](http://predictionbook.com/predictions/6442)

    - who bite him [first](http://predictionbook.com/predictions/6443)

         - and is [Quirrel](http://predictionbook.com/predictions/6444)
- [realize he is in a fictional story](http://predictionbook.com/predictions/8389)

Harry will become an Animagus who turns into

- a [creature which doesn't age](http://predictionbook.com/predictions/6446) (eg. a basilisk)
- a [phoenix](http://predictionbook.com/predictions/6447)
- a [human](http://predictionbook.com/predictions/6448)

Harry will [steal the Philosopher's Stone](http://predictionbook.com/predictions/6445) at some point

### Hermione

~~conditional on humans being transformable into house elves, will be so transformed [before chapter 85](http://predictionbook.com/predictions/6110)~~

was [not False Memory-charmed](http://predictionbook.com/predictions/6509) at any point between chapter 60 and 83

### Quirrel

will:

- spend [>=2 years as Defense professor](http://predictionbook.com/predictions/6449)
- [die fighting Voldemort](http://predictionbook.com/predictions/6450)

    - [by ch100](http://predictionbook.com/predictions/5016)
- have [Hermione killed](http://predictionbook.com/predictions/6451) with Harry as a witness

is...

- [Voldemort](http://predictionbook.com/predictions/6454)

    - [a younger version](http://predictionbook.com/predictions/6455) of Voldemort, a damaged backup from many years before (like the diary Riddle)
    - the [fused personality](http://predictionbook.com/predictions/6456) of Voldemort + original Quirrel
    - the original Quirrel [possessed by Voldemort](http://predictionbook.com/predictions/6457) (a la _Philosopher's Stone_)
    - [a Horcrux](http://predictionbook.com/predictions/6458), as well as anything else
    - in the sense that he [killed the original Voldemort & stole his role](http://predictionbook.com/predictions/7690)
- [a basilisk](http://predictionbook.com/predictions/5419)
- [Harry (future)](http://predictionbook.com/predictions/6459)

and plans to manipulate Harry (already a Horcrux) into [making a Harry-Horcrux of Quirrel](http://predictionbook.com/predictions/6461) so neither can ever die

[believes](http://predictionbook.com/predictions/6452) that Harry's stone is the Resurrection Stone

zombie-mode is about [spending time at the Pioneer probe perspective](http://predictionbook.com/predictions/6460)

(the original) [killed his parents](http://predictionbook.com/predictions/6453)

### Dumbledore

The rock he gave Harry is or contains a real:

- [Philosopher's Stone](http://predictionbook.com/predictions/6467)
- [Resurrection Stone](http://predictionbook.com/predictions/6468)
- [ordinary rock](http://predictionbook.com/predictions/6469)
- [James Potter](http://predictionbook.com/predictions/6470)

### Voldemort

[All Voldemort's horcruxes](http://predictionbook.com/predictions/6471) except the Pioneer probe will be destroyed, and Voldemort is doomed to wander the cosmos forever

- and this outcome will be either [planned or permitted by Harry](http://predictionbook.com/predictions/6472)

Harry is a Horcrux and [Voldemort knows this](http://predictionbook.com/predictions/6473)

[Voldemort is Quirrel's wand](http://predictionbook.com/predictions/6474) or is contained within it

### The Malfoys
#### Draco
#### Lucius

Lucius Malfoy [believes Harry to be Voldemort](http://predictionbook.com/predictions/6475) as of ch83

#### Narcissa

[is dead](http://predictionbook.com/predictions/6484)

- by someone other than Dumbledore

    - but [Dumbledore did claim he did it](http://predictionbook.com/predictions/5418)
    - by [Voldemort](http://predictionbook.com/predictions/6485)
    - by [her own hand](http://predictionbook.com/predictions/6486)

        - [accidentally](http://predictionbook.com/predictions/6487), eg. by Fiendfyre (analogous to Goyle)
    - by [Amelia Bones](http://predictionbook.com/predictions/6488)
- [by Dumbledore's hand](http://predictionbook.com/predictions/5417) and he killed her

    - [by accident](http://predictionbook.com/predictions/6489)
    - because she was a [Voldemort Horcrux](http://predictionbook.com/predictions/6490)
    - to [send a message](http://predictionbook.com/predictions/6491) to the Death Eaters to stop attacking Order of the Phoenix relatives

### "Cloak & Hat"

is...

- [Sirius Black](http://predictionbook.com/predictions/3236)
- [Quirrel](http://predictionbook.com/predictions/6483)
- [Severus Snape](http://predictionbook.com/predictions/6477)
- [Dumbledore](http://predictionbook.com/predictions/6478)
- [McGonagall](http://predictionbook.com/predictions/6180)
- [Harry](http://predictionbook.com/predictions/6479) (future or present)
- [Leroy Lockhart](http://predictionbook.com/predictions/6480)
- [Sybil Trelawney](http://predictionbook.com/predictions/6481)
- [Helena Ravenclaw](http://predictionbook.com/predictions/6482) (the Grey Lady ghost)
- someone possessed by or related to [the spirit of Voldemort, but not Quirrel](http://predictionbook.com/predictions/6089)
- [an anime non-canon character](http://predictionbook.com/predictions/6074)

has Obliviated [Blaise Zabini's mother](http://predictionbook.com/predictions/6476)

### Peter Pettigrew

[is dead](http://predictionbook.com/predictions/6500)

### Bellatrix Black

[is a Horcrux](http://predictionbook.com/predictions/6501)

### Sirius Black

is [not in Azkaban](http://predictionbook.com/predictions/6502)

- and the person in Azkaban [is Peter Pettigrew](http://predictionbook.com/predictions/6503)
- and is [in Hogwarts](http://predictionbook.com/predictions/6504)

### Gilderoy Lockhart

will be...

- [Sir Not Appearing In This Fanfic](http://predictionbook.com/predictions/6505)
- [mentioned by name but not appearing](http://predictionbook.com/predictions/6513)
- (conditional on appearance) [competent and not conceited](http://predictionbook.com/predictions/6507)
- (conditional on appearance) [competent and conceited](http://predictionbook.com/predictions/6508)

### Severus Snape

[will go back to the dark side](http://predictionbook.com/predictions/6373) such as working for Voldemort

### Sybil Trelawney

[will prophesy](http://predictionbook.com/predictions/6372) the unspoken ch63 prophecy within earshot of Harry

# Analysis

> The unprecedented gap in _Methods of Rationality_ updates prompts musing about whether readership is increasing enough & what statistics one would use; I write code to download FF.net reviews, clean it, parse it, load into R, summarize the data & depict it graphically, run linear regression on a subset & all reviews, note the poor fit, develop a quadratic fit instead, and use it to predict future review quantities.

## Statistical

In a [LW comment](http://lesswrong.com/lw/f8y/open_thread_november_115_2012/7qs9), I asked:

> I noticed in Eliezer's latest [1 November 2012] MoR update that he now has [*18,000 words written*](http://hpmor.com/notes/progress-12-11-01/) [of chapter 86], and even when that "chapter" is finished, he still doesn't plan to post anything, on top of a drought that has now lasted more than half a year. This doesn't seem very optimal from the point of view of gaining readers.
>
> But I was wondering how one would quantify that - how one would estimate how many readers Eliezer's MoR strategy of very rare huge dumps is costing him. Maybe survivorship curves, where survivorship is defined as "posting a review on FF.net"? So if say during the weekly MoR updates, a reader who posted a review of chapter X posted a review anywhere in X to X+n, that counts as  survival of that reader. One problem here is that new readers are constantly arriving... You can't simply say "X readers did not return from chapter 25 to chapter 30, while X+N did not return from chapter 85 to 86, therefore frequent updates are better" since you would expect the latter to be bigger simply because more people are reading. And even if you had data on unfavoriting or unfollowing, the important part is the opportunity cost - how many readers would have subscribed with regular updates
>
> If you had total page views, that'd be another thing; you could look at conversions: what percentage of page views resulted in conversions to subscribers for the regular update period versus the feast/fame periods. But I don't think FF.net provides it and while [HP:MoR.com](http://www.hpmor.com/) has Google Analytics, I don't have access. Maybe one could look at each chapter pair-wise, and seeing what fraction of reviewers return? The growth might average out since we're doing so many comparisons... But the delay is now so extreme this would fail: we'd expect a huge growth in reviewers from chapter 85 to chapter 86, for example, simply because it's been like 8 months now - here too the problem is that the growth in reviewers will be less than what it "should be". But how do we figure out "should be"?
>
> After some additional discussion with clone\_of\_saturn, I've rejected the idea of survivorship curves; we thought correlations between duration and total review count might work, but interpretation was not clear. So the best current idea is: gather duration between each chapter, the # of reviews posted within X days (where X is something like 2 or 3), plot the points, and then see whether a line fits it better or a logarithm/logistic curve - to see whether growth slowed  as the updates were spaced further apart.
>
> Getting the data is the problem. It's easy to get total reviews for each chapter since FF.net provides them. I don't know of any way to get total reviews after X days posted, though! A script or program could probably do it, but I'm not sure I want to bother with all this work (especially since I don't know how to do Bayesian line or logistic-fitting) if it's not of interest to anyone or Eliezer would simply ignore any results.

I decided to take a stab at it.

## Data

[FanFiction.Net](!Wikipedia) does not provide published dates for each chapter, so we'll be working off solely the posted reviews. FF.net reviews for _MoR_ are provided on 1256 pages (as of 3 November 2012), numbering from 1. If we go from 1-1256, starting with `http://www.fanfiction.net/r/5782108/85/1/`, we can download them with a script enumerating the URLs & using string interpolation. Eyeballing a textual dump of the HTML (courtesy of `elinks`), it's easy to extract with `grep` the line with user, chapter number, and date with a HTML string embedded as a link with each review, leading to this script:

~~~{.Bash}
for i in {1..1256}
do elinks -dump-width 1000 -no-numbering -no-references -dump http://www.fanfiction.net/r/5782108/0/$i/
     | grep "report review for abuse " >> reviews.txt
done
~~~

Since page #1 is for the most recent URLs and we started with 1, the reviews were dumped newest to oldest:

eg.

    [IMG] report review for abuse Faerie of Tara 4/1/12 . chapter 3
    [IMG] report review for abuse Faerie of Tara 4/1/12 . chapter 2
    report review for abuse Aww 4/1/12 . chapter 81
    report review for abuse bella-farfallina 4/1/12 . chapter 81
    [IMG] report review for abuse Isis Aurora Tomoe 4/1/12 . chapter 2
    [IMG] report review for abuse bosk 4/1/12 . chapter 1
    [IMG] report review for abuse yamiishot 4/1/12 . chapter 81
    report review for abuse Joe in Australia 4/1/12 . chapter 81
    report review for abuse of course 3/31/12 . chapter 45
    report review for abuse RickJs 3/31/12 . chapter 22

We can clean this up with more shell scripting:

~~~{.Bash}
sed -e 's/\[IMG\] //' -e 's/.*report review for abuse //' -e 's/ \. chapter / /' reviews.txt  > filtered-reviews.txt
~~~

This gives us better looking data like:

    NATWEST 3/4/10 4
    hemotem 3/4/10 4
    Isabelle Eir 3/4/10 4
    Orc Shaman 3/3/10 1
    Mariann's 3/3/10 4
    cheekylildevil 3/3/10 4
    Star Bear 3/3/10 4

The spaces in names means we can't simply do a search-and-replace to turn spaces into commas and call that a CSV which can easily be read in R; so more scripting, in Haskell this time (though I'm sure `awk` or something could do the job, I don't know it):

~~~{.Haskell}
import Data.List (intercalate)

main :: IO ()
main = do f <- readFile "filtered-reviews.txt"
          let parsed = map words (lines f)
          let unparsed = "User,Date,Chapter\n" ++ unlines (map unsplit parsed)
          writeFile "reviews.csv" unparsed

-- eg "Star Bear 3/3/10 4" ~> ["Star", "Bear", "3/3/10", "4") ~> "Star Bear,3/3/10,4"
unsplit :: [String] -> String
unsplit xs = let chapter = last xs
                 date = last (init xs)
                 user = unwords (init (init xs))
             in intercalate "," [user, date, chapter]
~~~

## R

A `runhaskell mor.hs` later and our [CSV of 18,852 reviews](/docs/2012-hpmor-reviews.csv) is ready for analysis in the R interpreter:

~~~{.R}
data <- read.table("http://www.gwern.net/docs/2012-hpmor-reviews.csv",header=TRUE, sep=",",quote="")
data
...
18840                                        cheekylildevil  2/28/10       1
18841                                       scarletalphabet  2/28/10       1
18842                                           StoryTagger  2/28/10       1
18843                                                HJP265  2/28/10       1
18844                                              dougal74  2/28/10       1
18845                                                baceba  2/28/10       1
18846                                               Cibbler  2/28/10       1
18847                                               Davek86  2/28/10       1
18848                                        omegahurricane  2/28/10       1
18849                                         hhrforeverhhr  2/28/10       1
18850                                    anonnatymousMARTIN  2/28/10       1
18851                                            wetterwaxs  2/28/10       1
18852                                                Errrrr  2/28/10       1
# Convert the date strings to R dates
data=data.frame(Chapter=data$Chapter, Date=as.Date(data$Date,"%m/%d/%Y"), User=data$User)
summary(data)

    Chapter           Date                      User
 Min.   : 1.00   Min.   :10-02-28   Guest         :  310
 1st Qu.:10.00   1st Qu.:10-06-16   anon          :  106
 Median :27.00   Median :10-11-26   voodooqueen126:   85
 Mean   :35.64   Mean   :11-02-10   Kutta         :   77
 3rd Qu.:63.00   3rd Qu.:11-09-02   badkidoh      :   73
 Max.   :85.00   Max.   :12-11-02   AR            :   72
                                    (Other)       :18129
~~~

Surprisingly, it looks like only one user ('voodooqueen126') has reviewed every chapter. The dates also clearly indicate the slowdown in _MoR_ posting, with the median chapter being posted all the way back in 2010.

When we plot each review by the chapter it was reviewing and the date it was posted, we see many clear patterns:

~~~{.R}
plot(data$Chapter,data$Date)
~~~

![Scatterplot of all reviews, date posted versus chapter](/images/hpmor/allreviews.png)

Obviously no one can review a chapter before it was posted, which is the thick black line along the bottom. We can also see how the delays between chapters: originally very small, the gaps increase tremendously in the 70s (remember the whole y-axis is ~3 years) - just 2 of the delays look like they cover something like $\frac{1}{3}-\frac{1}{2}$ the entire lifespan of _MoR_! Other interesting observations is that chapter 1 and chapter 5 are extremely popular for reviewers, with hardly a day passing without review even as vast wastelands open up in 2012 in chapters 40-60. A final curious observation is the presence of distinct horizontal lines; I am guessing that these are people prone to reviewing who are binging their way through _MoR_.

### Filtered reviews

The next question is: if we plot only the subset of reviews which were made within 7 days of the first review, what does that look like?

~~~{.R}
# extract each chapter's reviews into its own vector - one vector of dates for ch1, one vector of dates for ch2 etc.
myList <- list()
for (i in 1:85) { myList[[i]] <- rev(data$Date[data$Chapter==i]) }
# take a look at the first entry in each vector as a sanity check
lapply(myList, function(a) a[1])
[[1]]
[1] "10-02-28"

[[2]]
[1] "10-02-28"

[[3]]
[1] "10-03-01"

[[4]]
[1] "10-03-03"

[[5]]
[1] "10-03-08"
...
# looks reasonable
# what's the total by each chapter?
totalreviews <- unlist(lapply(myList, length))
totalreviews
 [1]  823  391  205  293 1159  499  419  375  423  498  332  215  270  283  222
[16]  291  385  302  270  311  248  199  215  211  141  243  283  138  136  143
[31]  160  204  148  119   28   77  106   48  130  101  117  183   52   33  139
[46]  246  334  120  148  104  181   69   47  183   38  143   74  202   80  131
[61]  127  164  303  175  146   42  147  130  253  296  217  398  136  249  187
[76]  231  525  185  153  308  235  113   74  154  236
# Now the hard part: map over the list of vectors, and filter out anything dated 7 days after the first date
earlyreviews <- unlist(lapply(lapply(myList,
    function(a) Filter(function(b) {if (b > a[1]+7) return(FALSE) else return(TRUE)}, a)), length))
 [1]  17  11  13  42 341 191 204 210 296 282 117 136 162 144 126 155 199 199 159
[20] 209 133 125 142 111  92 145 193  96  92  43 115 170  78  88   5  34  77  17
[39]  48  71  88 129  18  10  40 164 246 100 124  82 150  51  32 168  32 129  62
[58] 167  66 116 109 140 155  55 114  19 111 104 175 187 110 175 127 212 164 181
[77] 117 169 139 299 211 106  69 143 106
~~~

How did chapter 5 get *341* reviews within 7 days and have *1159* in total, you ask - might my data not be wrong? But if you check the [chapter 5 reviews](http://www.fanfiction.net/r/5782108/5/1/) and scroll all the way down, you'll find that people back in 2010 were *very* chuffed by the Draco scenes.

Moving onward, we want to graph the date and then fit a [linear model](!Wikipedia) (a line which minimizes the deviation of all of the points from it; I drew on a [handout for R programming](http://www.montefiore.ulg.ac.be/~kvansteen/GBIO0009-1/ac20092010/Class8/Using%20R%20for%20linear%20regression.pdf)):

~~~{.R}
# turn vector into a plottable table & plot it
filtered=data.frame(Chapter=c(1:85),Reviews=earlyreviews)
plot(filtered$Chapter, filtered$Reviews)

# run a linear model: is there any clear trend?
lm(filtered$Reviews ~ filtered$Chapter)
...
Coefficients:
     (Intercept)  filtered$Chapter
        128.3773           -0.0966

# the slope doesn't look very interesting...
# let's plot the regression line too:
abline(lm(filtered$Reviews ~ filtered$Chapter))
~~~

![Graph reviews posted within a week, per chapter.](/images/hpmor/filteredreviews.png)

Look at the noise. We have some huge spikes in the early chapters, some sort of dip in the 40s-70s, and then a similar spread of highly and lowly reviewed chapters at the end. The linear model is basically just the average (`mean(filtered$Reviews)` = 124.2); it's actually predicting slight declines in reviews posted within 7 days, interestingly.

### All reviews

Same thing if we look at *total* reviews for each chapter:

~~~{.R}
filtered2=data.frame(Chapter=c(1:85),Reviews=totalreviews)
plot(filtered2$Chapter, filtered2$Reviews)
model2 = lm(filtered2$Reviews ~ filtered2$Chapter)
summary(model2)
...
Residuals:
    Min      1Q  Median      3Q     Max
-215.47  -98.81  -24.02   58.08  834.21

Coefficients:
                  Estimate Std. Error t value Pr(>|t|)
(Intercept)       338.3462    33.4318  10.120 3.79e-16 ***
filtered2$Chapter  -2.7107     0.6753  -4.014  0.00013 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 152.8 on 83 degrees of freedom
Multiple R-squared: 0.1626, Adjusted R-squared: 0.1525
F-statistic: 16.11 on 1 and 83 DF,  p-value: 0.0001302

abline(model2)
~~~

![Graph all reviews by posted time and chapter](/images/hpmor/allreviewsbychapter.png)

### Fitting quadratics

Looking at the line, the fit seems poor over all (large [residuals](!Wikipedia "Errors and residuals in statistics")) quite poor at the beginning and end - doesn't it look like a big U? That sounds like a quadratic, so more Googling for R code and an hour or two later, I fit some quadratics to the 7-day reviews and the total reviews:

~~~{.R}
plot(filtered$Chapter, filtered$Reviews)
model <- lm(filtered$Reviews ~ filtered$Chapter + I(filtered$Chapter^2))
summary(model)
...
Residuals:
     Min       1Q   Median       3Q      Max
-160.478  -42.795   -3.364   40.813  179.321

Coefficients:
                       Estimate Std. Error t value Pr(>|t|)
(Intercept)           178.41168   22.70879   7.857 1.34e-11 ***
filtered$Chapter       -3.54725    1.21875  -2.911  0.00464 **
I(filtered$Chapter^2)   0.04012    0.01373   2.922  0.00449 **
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 68.15 on 82 degrees of freedom
Multiple R-squared: 0.09533,    Adjusted R-squared: 0.07327
F-statistic:  4.32 on 2 and 82 DF,  p-value: 0.01645

xx <- seq(min(filtered$Chapter),max(filtered$Chapter),len=200)
yy <- model$coef %*% rbind(1,xx,xx^2)
lines(xx,yy,lwd=2,col=3)
~~~

![Fit a quadratic (U-curve) to the filtered review-count for each chapter](/images/hpmor/filteredreviews-quadratic.png)

The quadratic fits nicely. And for total reviews, we observe a similar curve:

~~~{.R}
plot(filtered2$Chapter, filtered2$Reviews)
model2 <- lm(filtered2$Reviews ~ filtered2$Chapter + I(filtered2$Chapter^2))
summary(model2)
...
Residuals:
    Min      1Q  Median      3Q     Max
-289.68  -56.83  -17.59   36.67  695.45

Coefficients:
                        Estimate Std. Error t value Pr(>|t|)
(Intercept)            543.84019   41.43142  13.126  < 2e-16 ***
filtered2$Chapter      -16.88265    2.22356  -7.593 4.45e-11 ***
I(filtered2$Chapter^2)   0.16479    0.02505   6.578 4.17e-09 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 124.3 on 82 degrees of freedom
Multiple R-squared: 0.4518, Adjusted R-squared: 0.4384
F-statistic: 33.79 on 2 and 82 DF,  p-value: 1.977e-11

xx <- seq(min(filtered2$Chapter),max(filtered2$Chapter),len=200)
yy <- model2$coef %*% rbind(1,xx,xx^2)
lines(xx,yy,lwd=2,col=3)
~~~

![Fit a quadratic (U-curve) to the final 3 November 2012 review-count for each chapter](/images/hpmor/allreviews-quadratic.png)

### Predictions / confidence intervals

Linear models, even as a quadratic, are pretty simple. They don't have to be a black box, and they're interpretable the moment you are given the coefficients: 'this' times 'that' equals 'that other thing'. We learned these things in middle school by hand-graphing functions. So it's not hard to figure out what function our fitted lines represent, or to extend them rightwards to uncharted waters.

Our very first linear model for `filtered$Reviews ~ filtered$Chapter` told us that the coefficients were Intercept: 128.3773, `filtered$Chapter`: -0.0966. Going back to middle school math, the intercept is the _y_-intercept, the value of _y_ when _x_=0; then the other number must be how much we multiply _x_ by.

So the linear model is simply this: $y = -0.0966x + 128.3773$. To make predictions, we substitute in for _x_ as we please; so chapter 1 is $-0.0966 \times 1 + 128.3773 = 128.28$, chapter 85 is $-0.0966 \times 85 + 128.3773 = 120.16$ (well, what did you expect of a nearly-flat line?) and so on.

We can do this for the quadratic too; your ordinary quadratic looked like $y = x^2 + x + 1$, so it's easy to guess what the filled-in equivalent will be. We'll look at total reviews this time (`filtered2$Reviews ~ filtered2$Chapter + I(filtered2$Chapter^2)`). The intercept was 543.84019, the first coefficient was -16.88265, and the third mystery number was 0.16479, so the new equation is $y = 0.16479x^2 + -16.88265x + 543.84019$. What's the prediction for chapter 86? $0.16479\times(86^2) + (-16.88265)\times86 + 543.8401 = 310.719$. And for chapter 100, it'd go $0.16479\times(100^2) + (-16.88265)\times100 + 543.8401 = 503.475$.

Can we automate this? Yes. Continuing with total reviews:

~~~{.R}
x = filtered2$Chapter; y = filtered2$Reviews
model2 <- lm(y ~ x + I(x^2))
predict.lm(model2, newdata = data.frame(x = c(86:100)))
       1        2        3        4        5        6        7        8
310.7242 322.3504 334.3061 346.5914 359.2063 372.1507 385.4248 399.0284
       9       10       11       12       13       14       15
412.9616 427.2244 441.8168 456.7387 471.9903 487.5714 503.4821
~~~

(Notice that this use of `predict` spits out the same answers we calculated for chapter 86 and chapter 100.)

So for example, the fitted quadratic model predicts ~503 total reviews for chapter 100. Making further assumptions (the error in estimating is independent of time, normally distributed, has zero mean, and constant variance), we [predict](http://predictionbook.com/predictions/9270 "HP MoR: chapter 100 will, after 1 month, have 215-792 reviews posted on FF.net") that our 95% confidence interval 215-792 total reviews of chapter 100:

~~~{.R}
predict.lm(model2, newdata = data.frame(x = 100), interval="predict")
       fit    lwr      upr
  503.4821 215.05 791.9141
~~~

Clearly the model isn't making very strong predictions because the standard error is so high. We get a similar result asking just for the 7-day reviews:

~~~{.R}
filtered=data.frame(Chapter=c(1:85),Reviews=earlyreviews)
y=filtered$Reviews; x=filtered$Chapter

model = lm(y ~ x + I(x^2))
model
...
Coefficients:
(Intercept)            x       I(x^2)
  178.41168     -3.54725      0.04012

predict.lm(model, newdata = data.frame(x = 100), interval="predict")
      fit      lwr      upr
1 224.925 66.83383 383.0162
~~~

This *seems* like a fairly reasonable [prediction](http://predictionbook.com/predictions/9343 "HP MoR: chapter 100 will, after 7 days, have 66-383 reviews posted on FF.net"): 66-383 reviews posted within 7 days. But this is based purely off the model, is it taking into account that even the quadratic model has some pretty large residuals? Let's plot an entire [confidence band](!Wikipedia):

~~~{.R}
filtered = data.frame(Chapter=c(1:85),Reviews=earlyreviews)
y = filtered$Reviews; x = filtered$Chapter
plot(x, xlab="Chapter",
     y, ylab="Reviews posted within week",
     main="7-Day Reviews per Chapter with Quadratic Fit and 95% Confidence Intervals")

model = lm(y ~ x + I(x^2))
xx <- seq(min(x),max(x),len=200)
yy <- model$coef %*% rbind(1,xx,xx^2)
lines(xx,yy,lwd=2,col=3)

prd <- predict(model, newdata = data.frame(x = c(1:85)), interval="confidence",type="response")
lines(c(1:85),prd[,2],col="red",lty=2)
lines(c(1:85),prd[,3],col="red",lty=2)
~~~

![7-Day Reviews per Chapter with Quadratic Fit and 95% Confidence Intervals](/images/hpmor/filteredreviews-quadratic-ci.png)

Obviously far more than 5% of the datapoints are falling outside the confidence band which was calculated from the quadratic model. So the predicted confidence intervals are too narrow - the large residuals bounce datapoints around a lot, both beneath and above the confidence band. This should temper our forecasting enthusiasm. What might predict the residuals better? Day of week? Length of chapter update? Interval between updates? Hard to know.

### Conclusions

Sadly, neither the quadratic nor the linear fits lend any support to the original notion that we could estimate how much readership _MoR_ is being cost by the exponentially-slowing updates for the simple reason that the observed reviews per chapter do not match any simple increasing model of readership but a stranger U-curve (why do reviews decline so much in the middle when updates were quite regular?).

We could argue that the sluggishness of the recent upturn in the U-curve (in the 80s) is due to there only being a few humongous chapters, but those chapters are quantitatively and qualitatively different from the early chapters (especially chapter 5) so it's not clear that any of them "should" have say, 341 reviews within a week.

## External links

- [LW discussion](http://lesswrong.com/r/discussion/lw/fag/analyzing_ffnet_reviews_of_harry_potter_and_the/#comments)
- [Reddit discussion](http://www.reddit.com/r/HPMOR/comments/12l6g6/ffnet_reviews_of_hpmor_statistics/)
